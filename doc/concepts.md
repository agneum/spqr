# SQPR Concepts

## Data shard
```
┌────────────────────────────────────────────────────────┐
│                         Data Shard                     │
│                                                        │
│                                                        │
│                  ┌───────────────┐                     │
│                  │               │                     │
│             ┌───▶│ Primary Node  │◀────┐               │
│             │    │               │     │               │
│             │    └───────────────┘     │               │
│             │                          │               │
│             │                          │               │
│     ┌───────────────┐          ┌───────────────┐       │
│     │               │          │               │       │
│     │Quorum replica │          │Quorum replica │       │
│     │               │          │               │       │
│     └───────────────┘          └───────────────┘       │
│                                                        │
│                                                        │
└────────────────────────────────────────────────────────┘
```
## Router

## Coordinator


                                                                               |
                                                                               |
                     Control plane                                             |                Data plane
                                                                               |                ----------------
                                        ----------------                       |                |              |
                                        |              |                       |                | Data shard 2 |
                                        |    Router1   |                       |                |              |
                                        |              |                       |                ----------------
                                        ----------------                       |
                                   /                                           |
                                  /                                            |
                                                                               |                ----------------
        ------------------------        ----------------                       |                |              |
        |                      |        |              |                       |                | Data shard 1 |
        |      Psql Client     |   ---> |   Router2    |                       |                |              |
        |                      |        |              |                       |                ----------------
        ------------------------        ----------------                       |
                                                                               |                ----------------
                                                                               |                |              |
                                                                               |                | Data shard 3 |
                                                                               |                |              |
                                                                               |                ----------------
--------------------------------------------------------------------------------


                   Coordinator + Resharder

      -------------------           ---------------------
      |                 |    gRPC   |                   |
      |  Coordinator    |    <---   |   Resharder       |
      |                 |           |                   |
      -------------------           ---------------------